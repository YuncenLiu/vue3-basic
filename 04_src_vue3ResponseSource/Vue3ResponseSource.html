<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Vue3 响应式原理</title>
</head>
<body>
<script type="text/javascript">
    let person = {
        name: '张三',
        age: 18
    }


    // Vue2 实现响应式原理
/*
    let p = {}
    Object.defineProperty(p, 'name',{
        configurable: true,
        get(){ // 读取即调用
            console.log('读取 name 属性')
            return person.name
        },
        set(value){ // 修改既调用
            console.log('修改了 name 属性')
            person.name = value
        }
    })
    Object.defineProperty(p, 'age',{
        get(){ // 读取即调用
            console.log('读取 age 属性')
            return person.age
        },
        set(value){ // 修改既调用
            console.log('修改了 age 属性')
            person.age = value
        }
    })
*/


    // Vue3 实现响应式
 /*   const p = new Proxy(person,{
        get(target,propName){
            console.log(`${propName} 被读取`)
            return target[propName]
        },
        set(target, propName, value){
            console.log(`${propName} 属性被更新，新的内容为 ${value}`)
            target[propName] = value
        },
        deleteProperty(target, p) {
            console.log(`${p} 被删除了`)
            return delete target[p]
        }
    })*/


    let obj = {a:1,b:2}
    // Reflect.get(obj,'a') // 获取
    // Reflect.set(obj,'a',6) // 修改
    // Reflect.deleteProperty(obj,'a') // 删除

    // 通过 Reflect 操作
/*    const x1 = Reflect.defineProperty(obj, 'c' ,{
        get(){
            return 3
        }
    })
    const x2 = Reflect.defineProperty(obj, 'c', {
        get(){
            return 4
        }
    })*/


</script>
</body>
</html>